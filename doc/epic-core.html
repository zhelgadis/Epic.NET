<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 9. Epic.Core</title><link rel="stylesheet" href="/layout.css" type="text/css" /><link rel="stylesheet" href="/screen.css" type="text/css" /><link rel="stylesheet" href="css/shCore.css" type="text/css" /><link rel="stylesheet" href="css/shCoreDefault.css" type="text/css" /><link rel="stylesheet" href="css/shThemeDefault.css" type="text/css" /><link rel="stylesheet" href="css/documentation.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="manual.html" title="Dominant Domains" /><link rel="up" href="the_bellis_perennis.html" title="Part II. The bellis perennis" /><link rel="prev" href="the_bellis_perennis.html" title="Part II. The bellis perennis" /><link rel="next" href="epic-linq.html" title="Chapter 10. Epic.Linq" /><meta charset="utf-8" /><link rel="icon" href="/favicon.ico" /><script src="script/shCore.js" type="text/javascript"></script><script src="script/shBrushCSharp.js" type="text/javascript"></script><link rel="alternate" type="application/atom+xml" title="Development log" href="atom.xml" /><!--[if !IE 7]>
    <style type="text/css">
		#wrap {display:table;height:100%}
	</style>
  <![endif]--><!--[if lt IE 8]>
    <style type="text/css">
        #header {padding-top: 9px}
    </xsl:element>
  <![endif]--><!--[if IE 8]>
    <style type="text/css">
		#wrap {width:100%}
	</style>
  <![endif]--><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23846269-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  </script></head><body><div id="wrap"><div id="header"><a href="http://github.com/Shamar/Epic.NET/"><img style="position: absolute; top: 0; left: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" alt="Fork me on GitHub" /></a><a class="title" href="/">Epic</a><span>dominant domains</span></div><div id="main"><div id="content"><div class="chapter" title="Chapter 9. Epic.Core"><div class="titlepage"><div><div><h2 class="title"><a id="epic-core"></a>Chapter 9. Epic.Core</h2></div></div></div><div class="toc"><ul><li><a href="/doc/manual.html" class="toc-title">Table of Contents</a></li><li><span class="section"><a href="epic-core.html#about_the_company_first">The company, first</a></span></li><li><span class="section"><a href="epic-core.html#about_the_environment">The environment</a></span></li><li><span class="section"><a href="epic-core.html#about_the_corporate_organization">The corporate organization</a></span></li><li><span class="section"><a href="epic-core.html#about_yet_another_working_day">Yet another working day!</a></span></li></ul></div><div class="blockquote"><table border="0" width="100%" cellspacing="0" cellpadding="0" class="blockquote" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>An enterprise system is a system that supports the day to day operations of
an enterprise or organization in real time.</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
Strong D.M. &amp; Volkoff O.
<em class="citetitle">A roadmap for enterprise system implementation (2004)</em>
</span></td></tr></table></div><p>At the core of the Epic framework there is a model of the corporate that uses
the software. It’s a quite simple model, a generic one, that describes a well
defined context: the corporate daily life.</p><p>Indeed, our applications target the core business of our customers.
The way each user approaches the application depends on the roles he plays in
the organization.
It is not simply a matter of access control and security, every instance of
the software runs under the responsibility of a specific person, and different
people will have different kinds of tasks to execute.</p><p>Such models are contained in the Epic.Core assembly: under the <code class="literal">Epic</code> namespace
you find a set of interfaces and abstract classes that leaves you all the
flexibility you could need but forcing important invariants
that could be missed during the development.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This chapter is still under development. Please
<a class="ulink" href="https://groups.google.com/group/epic-net/" target="_top">send us</a> feedback,
questions and suggestions.</p></td></tr></table></div><div class="section" title="The company, first"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="about_the_company_first"></a>The company, first</h2></div></div></div><p>The first entity we encounter while working with Epic is the
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/Enterprise.cs" target="_top">Enterprise</a>.
It’s a singleton, a static class that must be initialized before use.</p><p>In the initialization we have to provide an implementation of the abstract class
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/EnterpriseBase.cs" target="_top">EnterpriseBase</a>.
Such implementation will be tailored to the concrete application that
will use the domain, providing access to the
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/IEnvironment.cs" target="_top">environment</a>
and to the
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/IOrganization.cs" target="_top">corporate organization</a>.</p><p>The abstract methods <code class="literal">RetrieveEnvironmentInstance()</code> and
<code class="literal">RetrieveEnterpriseInstance()</code> are not simple factories: they incapsulate both
the knowledge of the right types to use, their initialization techniques and
their livecycle.</p><p>Being a static class coupled with <code class="literal">EnterpriseBase</code>, <code class="literal">Enterprise</code> is the trick to
do things properly down to roles, since you have to use the base
classes provided, with all the connected long term benefit.</p></div><div class="section" title="The environment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="about_the_environment"></a>The environment</h2></div></div></div><p>Each company operates in an environment.
From the company point of view, such an environment (physical, social
and economic) provides a range of services that are crucial to its success.
Buildings, roads, laws and electricity are simple yet evident examples.</p><p>The model of that company’s core business can not be that different.</p><p>Indeed it needs to be stored and tracked for example.
While writing pure POCOs, a modeler shouldn’t consider neither persistence nor
logging. Yet, the application must do both!</p><p><code class="literal">Epic.Proxy</code> provides autogenerated proxies to inject the infrastructure in the
domain entities, but how to retrieve such infrastructure? How to access the
ADO.NET connection or the log4net.ILog to use?</p><p>The
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/IEnvironment.cs" target="_top">IEnvironment</a>
interface provide access to this kind of services. It’s a sort of service
locator but its use is only for entities' proxies and infrastructural code: no
entity or value object should ever depend on <code class="literal">IEnvironment</code>.</p><p>The <code class="literal">IEnvironment</code> instance is accessible from the <code class="literal">Enterprise.Environment</code>
property, that ask to the <code class="literal">EnterpriseBase</code> implementation provided during the
initialization. <code class="literal">EnterpriseBase</code> forces the environment to implement
<code class="literal">EnvironmentBase</code> that make it a
<a class="ulink" href="http://msdn.microsoft.com/it-it/library/system.runtime.serialization.iserializable.aspx#exampleToggle" target="_top">serializable singleton</a>.</p><p><a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/Environment/EnvironmentsChain.cs" target="_top">EnvironmentsChain</a>
and
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/Environment/EnvironmentChainLinkBase.cs" target="_top">EnvironmentChainLinkBase</a>
are building block for environment’s configuration, although it is perfectly
legitimate to derive <code class="literal">EnvironmentBase</code> directly.</p></div><div class="section" title="The corporate organization"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="about_the_corporate_organization"></a>The corporate organization</h2></div></div></div><p>To access the domain models, each corporate member has to enter in the
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/IOrganization.cs" target="_top">organization</a>.
After the authentication, the users start their own
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/IWorkingSession.cs" target="_top">working sessions</a>
and begin to achieve their roles.</p><p>The abstract class
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/Organization/OrganizationBase.cs" target="_top">OrganizationBase</a>
helps with the implementation of
the <code class="literal">IOrganization</code> interface, providing a set of template methods to handle
working sessions lifetime.</p></div><div class="section" title="Yet another working day!"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="about_yet_another_working_day"></a>Yet another working day!</h2></div></div></div><p>To design <code class="literal">IWorkingSession</code> we analyzed a tipical working day in a
successful company. Each day a lot of smart people enter in the company and
start their own tasks. Each person has specific responsibilities and roles.
Each role provides access to a set of resource and services that are required
to complete a set of tasks. Most resources require exclusive control for
an amount of time (did you say "the bathroom"?) but a few (hopefully very few)
require concurrent access and realtime synchronization.</p><p><a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/Organization/WorkingSessionBase.cs" target="_top">WorkingSessionBase</a>
is the base class to extend for describing working sessions.
It defines a set of template methods that enforce some important invariants.</p><p>For example, we have to define when a user <code class="literal">IsAllowed()</code> to access a role or what
to do <code class="literal">BeforeDispose()</code>. But the most important abstract method that we must
implement is <code class="literal">GetRoleBuilder()</code>. It returns a <code class="literal">RoleBuilder</code> that will create
the required role for the user performing the working session.</p><p><a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/Organization/RoleBuilder.cs" target="_top">RoleBuilder</a>
is an abstract class that can not be derived directly, but through
<a class="ulink" href="https://github.com/Shamar/Epic.NET/blob/devel/Code/Epic.Core/Organization/RoleBuilderBase.cs" target="_top">RoleBuilderBase</a>.
These two classes enforce a controversial rule: the clients must use the roles
through pure interfaces designed without any constraint, but all concrete
roles must derive <code class="literal">RoleBase</code>, that is an abstract class serializable and
disposable. Indeed roles' serialization and their disposition will be
required from the framework, as we will see in Epic.Poem.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="the_bellis_perennis.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="the_bellis_perennis.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="epic-linq.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part II. The bellis perennis </td><td width="20%" align="center"><a accesskey="h" href="manual.html">Table of Contents</a></td><td width="40%" align="right" valign="top"> Chapter 10. Epic.Linq</td></tr></table></div></div></div></div><div id="footer"><div class="copyright">Copyright © 2010-2011 Giacomo Tesio</div></div><script type="text/javascript">SyntaxHighlighter.all()</script></body></html>
